{"version":3,"sources":["data/ReefRepositoryV2Implement.ts","components/ReefBrowser.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["ReefRepositoryV2Implement","contractAddr","web3","contract","base","rpc","this","Web3","eth","Contract","contractABI","folderIdx","methods","getFolderListLength","call","arrayLength","promiseArray","i","push","getFolderList","Promise","all","IdxArray","length","getFolderName","NameArray","Result","tmp","name","getFolderExcelLength","getFolderExcel","excelArray","entry","console","log","getExcelLength","getExcel","uuid","size","lastModified","Date","fileUUID","fileName","axios","url","method","responseType","response","window","URL","createObjectURL","Blob","data","link","document","createElement","href","setAttribute","body","appendChild","click","removeChild","setChonkyDefaults","iconComponent","ChonkyIconFA","ReefBrowser","props","useState","snackbarInfo","setSnackbarInfo","path","index","folder","setFolder","file","setFile","folderFiles","setFolderFiles","useEffect","reefRepository","subFolders","listFolders","subFiles","listFolderFiles","then","res","folders","map","subFolder","id","toString","isDir","files","subFile","concat","catch","err","message","severity","updateFolderFiles","versionFiles","setVersionFiles","listFiles","reefFiles","reefFile","modDate","updateVersionFiles","folderChain","useMemo","p","useFolderChain","handleFileAction","isInFile","useCallback","ChonkyActions","OpenFiles","payload","targetFile","fileToOpen","isParent","entries","slice","parseInt","downloadFile","split","idx","useFileActionHandler","style","height","instanceId","onFileAction","defaultFileViewActionId","EnableListView","Snackbar","open","autoHideDuration","onClose","ClickAwayListenerProps","onClickAway","Alert","sx","width","App","repository","Box","flexGrow","AppBar","position","Toolbar","IconButton","edge","color","mr","Typography","variant","component","padding","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","getElementById","render"],"mappings":"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","file":"static/js/main.fca6fd22.chunk.js","sourcesContent":["import { ReefFile, ReefFolderV2, ReefRepositoryV2, ReefFileEntry } from \"./ReefRepository\";\nimport { AbiItem } from 'web3-utils'\nimport Web3 from 'web3';\nimport { Contract } from \"web3-eth-contract\"\nimport contractABI from './abiV2.json'\nimport axios from 'axios';\n\nexport class ReefRepositoryV2Implement implements ReefRepositoryV2 {\n\tcontractAddr = \"0xa1BCe629767D23cb719990FB8aDF54a2B4Da41d1\"\n    web3: Web3;\n    contract: Contract;\n\n    base = \"https://quorum-blockchain.yikuo.dev/api/\";\n    rpc = \"https://rpc.quorum-blockchain.yikuo.dev/\"\n\n    constructor() {\n        this.web3 = new Web3(this.rpc);\n        this.contract = new this.web3.eth.Contract( contractABI as AbiItem[], this.contractAddr);\n    }\n\t\n\tasync listFolders(folderIdx: number): Promise<ReefFolderV2[]> {\n\t\tlet arrayLength = await this.contract.methods.getFolderListLength(folderIdx).call();\n\t\tlet promiseArray = [];\n        for (let i = 0; i < arrayLength ; i++) {\n            promiseArray.push(this.contract.methods.getFolderList(folderIdx, i).call());\n        }\n        let IdxArray = await Promise.all(promiseArray);\n\t\tpromiseArray = [];\n\t\tfor (let i = 0; i < IdxArray.length; i ++){\n\t\t\tpromiseArray.push(this.contract.methods.getFolderName(IdxArray[i]).call())\n\t\t}\n\t\tlet NameArray = await Promise.all(promiseArray);\n\t\tlet Result: ReefFolderV2[] = []\n\t\tfor (let i = 0; i < IdxArray.length; i++){\n\t\t\tlet tmp = {\n\t\t\t\tfolderIdx: IdxArray[i],\n\t\t\t\tname: NameArray[i],\n\t\t\t}\n\t\t\tResult.push(tmp);\n\t\t}\n\t\treturn Result;\n\t}\n\tasync listFolderFiles(folderIdx: number): Promise<ReefFileEntry[]>{\n\t\tlet arrayLength = await this.contract.methods.getFolderExcelLength(folderIdx).call();\n\t\tlet promiseArray = [];\n        for (let i = 0; i < arrayLength ; i++) {\n            promiseArray.push(this.contract.methods.getFolderExcel(folderIdx, i).call());\n        }\n        let excelArray = await Promise.all(promiseArray);\n\t\tlet Result: ReefFileEntry[] = []\n\t\tfor (let i = 0; i < excelArray.length; i++){\n\t\t\tlet tmp = {\n\t\t\t\tfolderIdx: folderIdx,\n\t\t\t\tname: excelArray[i],\n\t\t\t}\n\t\t\tResult.push(tmp);\n\t\t}\n\t\treturn Result;\n\t}\n\tasync listFiles(entry: ReefFileEntry): Promise<ReefFile[]>{\n        console.log(entry.folderIdx)\n        console.log(entry.name)\n        let arrayLength = await this.contract.methods.getExcelLength(entry.folderIdx, entry.name).call()\n        console.log(\"TEST:\", arrayLength)\n        let promiseArray = [];\n        for (let i = 0 ; i < arrayLength ; i++) {\n            promiseArray.push(this.contract.methods.getExcel(entry.folderIdx, entry.name, i).call());\n        }\n        let excelArray = await Promise.all(promiseArray);\n\t\tlet Result: ReefFile[] = [];\n        for (let i = 0 ; i < excelArray.length ; i++){\n            let tmp = {\n                uuid: excelArray[i][\"cid\"],\n                name: entry.name,\n                size: +excelArray[i][\"size\"],\n                lastModified: new Date(+excelArray[i][\"time\"] * 1000)\n            }\n            Result.push(tmp);\n        }\n        return Result;\n\t}\n\tasync downloadFile(fileUUID: string, fileName: string): Promise<void>{\n        const response = await axios({\n            url: this.base + `data/${fileUUID}/download` ,\n            method: 'GET',\n            responseType: 'blob'\n        });\n\n        const url = window.URL.createObjectURL(new Blob([response.data]));\n        const link = document.createElement('a');\n        link.href = url;\n        link.setAttribute('download', fileName);\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\t}\n}"," import { Alert, AlertColor, Snackbar } from '@mui/material';\nimport {\n    ChonkyActions,\n    ChonkyFileActionData,\n    FileArray,\n    FileBrowser,\n    FileContextMenu,\n    FileList,\n    FileNavbar,\n    FileToolbar,\n    setChonkyDefaults,\n} from 'chonky';\nimport { ChonkyIconFA } from 'chonky-icon-fontawesome';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { ReefFile, ReefFileEntry, ReefFolderV2, ReefRepositoryV2 } from '../data/ReefRepository';\n\nsetChonkyDefaults({ iconComponent: ChonkyIconFA });\n\ninterface Path {\n    index: number,\n    name: string\n}\n\ninterface Folder {\n    path: Path[],\n    index: number\n}\n\ninterface SnackBarInfo {\n    message: string,\n    severity: AlertColor\n}\n\nexport const useFolderChain = (folder: Folder, file: ReefFileEntry | null): FileArray => {\n    return useMemo(() => {\n        const folderChain: FileArray = folder.path.map((p: Path) => {\n            return {\n                id: p.index.toString(),\n                name: p.name,\n                isDir: true\n            };\n        });\n\n        if (file != null) {\n            folderChain.push({\n                id: `${file.folderIdx}/${file.name}`,\n                name: file.name + \" (History)\",\n                isDir: false\n            })\n        }\n\n        console.log(folderChain);\n        return folderChain;\n    }, [folder, file]);\n};\n\nexport const useFileActionHandler = (\n    reefRepository: ReefRepositoryV2,\n    isInFile: boolean,\n    folder: Folder,\n    setSnackbarInfo: (snackbarInfo: SnackBarInfo) => void,\n    setFolder: (folder: Folder) => void,\n    setFile: (file: ReefFileEntry | null) => void\n) => {\n    return useCallback(\n        (data: ChonkyFileActionData) => {\n            if (data.id === ChonkyActions.OpenFiles.id) {\n                const { targetFile, files } = data.payload;\n                const fileToOpen = targetFile ?? files[0];\n                console.log(fileToOpen);\n\n                if (fileToOpen) {\n                    if (fileToOpen.isDir) {\n                        // Check if going back to parent\n                        let isParent = false;\n                        for (const [i, path] of folder.path.entries()) {\n                            if (path.index.toString() === fileToOpen.id) {\n                                isParent = true;\n\n                                setFolder({\n                                    path: folder.path.slice(0, i + 1),\n                                    index: parseInt(fileToOpen.id)\n                                });\n                                setFile(null);\n                                break;\n                            }\n                        }\n\n                        // Otherwise, advance in deeper folder\n                        if (!isParent) {\n                            setFolder({\n                                path: [...folder.path, {\n                                    index: parseInt(fileToOpen.id),\n                                    name: fileToOpen.name\n                                }],\n                                index: parseInt(fileToOpen.id)\n                            });\n                            setFile(null);\n                        }\n                    } else {\n                        if (isInFile) {\n                            setSnackbarInfo({\n                                message: \"The file is now downloading...\",\n                                severity: 'info'\n                            });\n\n                            reefRepository.downloadFile(fileToOpen.id, fileToOpen.name)\n                                .catch((err) => {\n                                    console.log(err);\n                                    setSnackbarInfo({\n                                        message: `Download failed: ${err}`,\n                                        severity: 'error'\n                                    });\n                                })\n                        } else {\n                            const [idx] = fileToOpen.id.split(\"/\", 1);\n                            const name = fileToOpen.name;\n\n                            setFile({\n                                folderIdx: parseInt(idx),\n                                name: name\n                            });\n                        }\n                    }\n                }\n            }\n\n            console.log(data);\n        },\n        [setFolder, folder.path, setFile, isInFile, setSnackbarInfo, reefRepository]\n    );\n};\n\nexport const updateFolderFiles = (\n    reefRepository: ReefRepositoryV2,\n    folder: Folder,\n    setFolderFiles: (folderFiles: FileArray) => void,\n    setSnackbarInfo: (snackbarInfo: SnackBarInfo) => void,\n) => {\n    setFolderFiles([null]);\n\n    const subFolders = reefRepository.listFolders(folder.index);\n    const subFiles = reefRepository.listFolderFiles(folder.index);\n\n    Promise.all([subFolders, subFiles]).then((res) => {\n            const subFolders = res[0];\n            const subFiles= res[1];\n\n            const folders: FileArray = subFolders.map((subFolder: ReefFolderV2) => {\n                return {\n                    id: subFolder.folderIdx.toString(),\n                    name: subFolder.name,\n                    isDir: true\n                };\n            });\n\n            const files: FileArray = subFiles.map((subFile: ReefFileEntry) => {\n                return {\n                    id: `${subFile.folderIdx}/${subFile.name}`,\n                    name: subFile.name,\n                    isDir: false\n                };\n            });\n\n            console.log(folders.concat(files));\n            setFolderFiles(folders.concat(files));\n        })\n        .catch((err: any) => {\n            console.log(err);\n            setSnackbarInfo({\n                message: `${err}`,\n                severity: 'error'\n            });\n        });\n}\n\nexport const updateVersionFiles = (\n    reefRepository: ReefRepositoryV2,\n    file: ReefFileEntry | null,\n    setVersionFiles: (versionFiles: FileArray | null) => void,\n    setSnackbarInfo: (snackbarInfo: SnackBarInfo) => void,\n) => {\n    if (file == null) {\n        setVersionFiles(null);\n    } else {\n        setVersionFiles([null]);\n        reefRepository.listFiles(file)\n            .then((reefFiles: ReefFile[]) => {\n                const versionFiles: FileArray = reefFiles.map((reefFile: ReefFile) => {\n                    return {\n                        id: reefFile.uuid,\n                        name: reefFile.name,\n                        modDate: reefFile.lastModified,\n                        size: reefFile.size,\n                        isDir: false\n                    }\n                })\n\n                setVersionFiles(versionFiles);\n            })\n            .catch((err: any) => {\n                console.log(err);\n                setSnackbarInfo({\n                    message: `${err}`,\n                    severity: 'error'\n                });\n            });\n    }\n}\n\n\nexport const ReefBrowser: React.FC<{ instanceId: string, reefRepository: ReefRepositoryV2 }> = (props) => {\n    const [snackbarInfo, setSnackbarInfo] = useState(null as (SnackBarInfo | null));\n    \n    const [folder, setFolder] = useState({\n        path: [{\n            index: 0,\n            name: 'Root'\n        }],\n        index: 0\n    } as Folder);\n    const [file, setFile] = useState(null as (ReefFileEntry | null));\n\n    const [folderFiles, setFolderFiles] = useState([null] as FileArray);\n    useEffect(() => {\n        updateFolderFiles(props.reefRepository, folder, setFolderFiles, setSnackbarInfo);\n    }, [folder, props.reefRepository])\n\n    const [versionFiles, setVersionFiles] = useState(null as (FileArray | null));\n    useEffect(() => {\n        updateVersionFiles(props.reefRepository, file, setVersionFiles, setSnackbarInfo);\n    }, [file, props.reefRepository])\n\n    const folderChain = useFolderChain(folder, file);\n    const handleFileAction = useFileActionHandler(\n        props.reefRepository,\n        file != null,\n        folder,\n        setSnackbarInfo,\n        setFolder,\n        setFile\n    );\n    return (\n        <div style={{ height: '80vh' }}>\n            <FileBrowser\n                instanceId={props.instanceId}\n                files={versionFiles ?? folderFiles}\n                folderChain={folderChain}\n                onFileAction={handleFileAction}\n                defaultFileViewActionId={ChonkyActions.EnableListView.id}\n            >\n                <FileNavbar />\n                <FileToolbar />\n                <FileList />\n                <FileContextMenu />\n            </FileBrowser>\n\n            <Snackbar\n                open={snackbarInfo !== null}\n                autoHideDuration={3000}\n                onClose={() => { setSnackbarInfo(null) }}\n                ClickAwayListenerProps={{onClickAway: () => {}}}\n            >\n                <Alert\n                    onClose={() => { setSnackbarInfo(null) }}\n                    severity={snackbarInfo?.severity}\n                    sx={{ width: '100%' }}\n                >\n                    {snackbarInfo?.message}\n                </Alert>\n            </Snackbar>\n        </div>\n    );\n};","import { ReefRepositoryV2Implement } from './data/ReefRepositoryV2Implement'\nimport { AppBar, Box, Toolbar, IconButton, Typography } from '@mui/material';\nimport GrassIcon from '@mui/icons-material/Grass';\nimport { ReefBrowser } from './components/ReefBrowser';\n\nfunction App() {\n  // let repository = new ReefRepositoryImplement()\n  let repository = new ReefRepositoryV2Implement()\n  return (\n    <Box sx={{ flexGrow: 1 }}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton\n            size=\"large\"\n            edge=\"start\"\n            color=\"inherit\"\n            aria-label=\"menu\"\n            sx={{ mr: 2 }}\n          >\n            <GrassIcon />\n          </IconButton>\n          <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\n            Reef Blockchain Explorer\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <div style={{ padding: 32 }}>\n        <ReefBrowser instanceId=\"reef-browser\" reefRepository={repository}  />\n      </div>\n    </Box>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport { setChonkyDefaults } from 'chonky';\nimport { ChonkyIconFA } from 'chonky-icon-fontawesome';\n\nsetChonkyDefaults({ iconComponent: ChonkyIconFA });\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\nroot.render(\n  <App />\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}