(this["webpackJsonpreef-blockchain-explorer"]=this["webpackJsonpreef-blockchain-explorer"]||[]).push([[0],{297:function(e){e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"uint256","name":"folderIdx","type":"uint256"},{"internalType":"string","name":"fileName","type":"string"},{"internalType":"string","name":"cid","type":"string"},{"internalType":"uint256","name":"time","type":"uint256"},{"internalType":"uint256","name":"size","type":"uint256"}],"name":"addExcel","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"string","name":"","type":"string"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"excelMap","outputs":[{"internalType":"string","name":"cid","type":"string"},{"internalType":"uint256","name":"time","type":"uint256"},{"internalType":"uint256","name":"size","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"folderArray","outputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"last","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"folderIdx","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"idx","type":"uint256"}],"name":"getExcel","outputs":[{"components":[{"internalType":"string","name":"cid","type":"string"},{"internalType":"uint256","name":"time","type":"uint256"},{"internalType":"uint256","name":"size","type":"uint256"}],"internalType":"struct StoreTree.excelData","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"folderIdx","type":"uint256"},{"internalType":"string","name":"name","type":"string"}],"name":"getExcelLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"folderIdx","type":"uint256"},{"internalType":"uint256","name":"excelIdx","type":"uint256"}],"name":"getFolderExcel","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"folderIdx","type":"uint256"}],"name":"getFolderExcelLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"folderIdx","type":"uint256"},{"internalType":"uint256","name":"queryIdx","type":"uint256"}],"name":"getFolderList","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"folderIdx","type":"uint256"}],"name":"getFolderListLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"folderIdx","type":"uint256"}],"name":"getFolderName","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_addr","type":"address"}],"name":"isAdmin","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"folderIdx","type":"uint256"},{"internalType":"string","name":"fileName","type":"string"},{"internalType":"string","name":"cid","type":"string"},{"internalType":"uint256","name":"time","type":"uint256"},{"internalType":"uint256","name":"size","type":"uint256"}],"name":"newExcel","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"folderIdx","type":"uint256"},{"internalType":"string","name":"name","type":"string"}],"name":"newFolder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"folderIdx","type":"uint256"},{"internalType":"uint256","name":"idx","type":"uint256"}],"name":"removeExcel","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"folderIdx","type":"uint256"},{"internalType":"uint256","name":"idx","type":"uint256"}],"name":"removeFolder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_addr","type":"address"},{"internalType":"bool","name":"_type","type":"bool"}],"name":"setAdmin","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},392:function(e,t,n){},409:function(e,t){},412:function(e,t){},415:function(e,t){},419:function(e,t){},420:function(e,t){},446:function(e,t){},448:function(e,t){},457:function(e,t){},459:function(e,t){},470:function(e,t){},472:function(e,t){},486:function(e,t){},514:function(e,t){},515:function(e,t){},589:function(e,t){},591:function(e,t){},598:function(e,t){},599:function(e,t){},745:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(293),r=n.n(a),u=(n(392),n(48)),o=n(107),s=n(12),l=n(10),c=n(294),p=n.n(c),d=n(297),y=n(298),m=n.n(y),f=function(){function e(){Object(s.a)(this,e),this.contractAddr="0xbA13a17e1769589291B682e4Ba30088Ce20792aB",this.web3=void 0,this.contract=void 0,this.base="https://quorum-blockchain.yikuo.dev/api/",this.rpc="https://rpc.quorum-blockchain.yikuo.dev/",this.web3=new p.a(this.rpc),this.contract=new this.web3.eth.Contract(d,this.contractAddr)}return Object(l.a)(e,[{key:"listFolders",value:function(){var e=Object(o.a)(Object(u.a)().mark((function e(t){var n,i,a,r,o,s,l,c,p;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.methods.getFolderListLength(t).call();case 2:for(n=e.sent,i=[],a=0;a<n;a++)i.push(this.contract.methods.getFolderList(t,a).call());return e.next=7,Promise.all(i);case 7:for(r=e.sent,i=[],o=0;o<r.length;o++)i.push(this.contract.methods.getFolderName(r[o]).call());return e.next=12,Promise.all(i);case 12:for(s=e.sent,l=[],c=0;c<r.length;c++)p={folderIdx:r[c],name:s[c]},l.push(p);return e.abrupt("return",l);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listFolderFiles",value:function(){var e=Object(o.a)(Object(u.a)().mark((function e(t){var n,i,a,r,o,s,l;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.methods.getFolderExcelLength(t).call();case 2:for(n=e.sent,i=[],a=0;a<n;a++)i.push(this.contract.methods.getFolderExcel(t,a).call());return e.next=7,Promise.all(i);case 7:for(r=e.sent,o=[],s=0;s<r.length;s++)l={folderIdx:t,name:r[s]},o.push(l);return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listFiles",value:function(){var e=Object(o.a)(Object(u.a)().mark((function e(t){var n,i,a,r,o,s,l;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.methods.getExcelLength(t.folderIdx,t.name).call();case 2:for(n=e.sent,i=[],a=0;a<n;a++)i.push(this.contract.methods.getExcel(t.folderIdx,t.name,a).call());return e.next=7,Promise.all(i);case 7:for(r=e.sent,o=[],s=0;s<r.length;s++)l={uuid:r[s].cid,name:t.name,size:+r[s].size,lastModified:new Date(1e3*+r[s].time)},o.push(l);return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"downloadFile",value:function(){var e=Object(o.a)(Object(u.a)().mark((function e(t,n){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m()({url:this.base+"data/".concat(t,"/download"),method:"GET",responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),i=document.createElement("a");i.href=t,i.setAttribute("download",n),document.body.appendChild(i),i.click(),document.body.removeChild(i)}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),b=n(818),h=n(819),x=n(820),g=n(813),j=n(821),v=n(372),T=n.n(v),O=n(23),w=n(27),I=n(814),F=n(815),M=n(7),k=n(129),E=n(5);Object(M.h)({iconComponent:k.a});var L=function(e){var t=Object(i.useState)(null),n=Object(O.a)(t,2),a=n[0],r=n[1],u=Object(i.useState)({path:[{index:0,name:"Root"}],index:0}),o=Object(O.a)(u,2),s=o[0],l=o[1],c=Object(i.useState)(null),p=Object(O.a)(c,2),d=p[0],y=p[1],m=Object(i.useState)([null]),f=Object(O.a)(m,2),b=f[0],h=f[1];Object(i.useEffect)((function(){!function(e,t,n,i){n([null]);var a=e.listFolders(t.index),r=e.listFolderFiles(t.index);Promise.all([a,r]).then((function(e){var t=e[0],i=e[1],a=t.map((function(e){return{id:e.folderIdx.toString(),name:e.name,isDir:!0}})),r=i.map((function(e){return{id:"".concat(e.folderIdx,"/").concat(e.name),name:e.name,isDir:!1}}));console.log(a.concat(r)),n(a.concat(r))})).catch((function(e){console.log(e),i({message:"".concat(e),severity:"error"})}))}(e.reefRepository,s,h,r)}),[s,e.reefRepository]);var x=Object(i.useState)(null),g=Object(O.a)(x,2),j=g[0],v=g[1];Object(i.useEffect)((function(){!function(e,t,n,i){null==t?n(null):(n([null]),e.listFiles(t).then((function(e){var t=e.map((function(e){return{id:e.uuid,name:e.name,modDate:e.lastModified,size:e.size,isDir:!1}}));n(t)})).catch((function(e){console.log(e),i({message:"".concat(e),severity:"error"})})))}(e.reefRepository,d,v,r)}),[d,e.reefRepository]);var T=function(e,t){return Object(i.useMemo)((function(){var n=e.path.map((function(e){return{id:e.index.toString(),name:e.name}}));return null!=t&&n.push({id:"".concat(t.folderIdx,"/").concat(t.name),name:t.name+" (History)"}),console.log(n),n}),[e,t])}(s,d),k=function(e,t,n,a,r,u){return Object(i.useCallback)((function(i){if(i.id===M.a.OpenFiles.id){var o=i.payload,s=o.targetFile,l=o.files,c=null!==s&&void 0!==s?s:l[0];if(c)if(c.isDir)r({path:[].concat(Object(w.a)(n.path),[{index:parseInt(c.id),name:c.name}]),index:parseInt(c.id)}),u(null);else if(t)a({message:"The file is now downloading...",severity:"info"}),e.downloadFile(c.id,c.name);else{var p=c.id.split("/",1),d=Object(O.a)(p,2),y=d[0],m=d[1];u({folderIdx:parseInt(y),name:m})}}console.log(i)}),[r,n.path,u,t,a,e])}(e.reefRepository,null!=d,s,r,l,y);return Object(E.jsxs)("div",{style:{height:"80vh"},children:[Object(E.jsxs)(M.c,{instanceId:e.instanceId,files:null!==j&&void 0!==j?j:b,folderChain:T,onFileAction:k,defaultFileViewActionId:M.a.EnableListView.id,children:[Object(E.jsx)(M.f,{}),Object(E.jsx)(M.g,{}),Object(E.jsx)(M.e,{}),Object(E.jsx)(M.d,{})]}),Object(E.jsx)(I.a,{open:null!==a,autoHideDuration:3e3,onClose:function(){r(null)},ClickAwayListenerProps:{onClickAway:function(){}},children:Object(E.jsx)(F.a,{onClose:function(){r(null)},severity:null===a||void 0===a?void 0:a.severity,sx:{width:"100%"},children:null===a||void 0===a?void 0:a.message})})]})};var C=function(){var e=new f;return Object(E.jsxs)(b.a,{sx:{flexGrow:1},children:[Object(E.jsx)(h.a,{position:"static",children:Object(E.jsxs)(x.a,{children:[Object(E.jsx)(g.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(E.jsx)(T.a,{})}),Object(E.jsx)(j.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Reef Blockchain Explorer"})]})}),Object(E.jsx)("div",{style:{padding:32},children:Object(E.jsx)(L,{instanceId:"reef-browser",reefRepository:e})})]})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,824)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,u=t.getTTFB;n(e),i(e),a(e),r(e),u(e)}))};Object(M.h)({iconComponent:k.a}),r.a.createRoot(document.getElementById("root")).render(Object(E.jsx)(C,{})),A()}},[[745,1,2]]]);
//# sourceMappingURL=main.4db261e5.chunk.js.map