(this["webpackJsonpreef-blockchain-explorer"]=this["webpackJsonpreef-blockchain-explorer"]||[]).push([[0],{297:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"cid","type":"string"},{"internalType":"uint256","name":"size","type":"uint256"}],"name":"addExcel","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"cid","type":"string"},{"internalType":"uint256","name":"size","type":"uint256"},{"internalType":"string","name":"path","type":"string"}],"name":"createExcel","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"idx","type":"uint256"}],"name":"getExcelArrayItem","outputs":[{"components":[{"internalType":"string","name":"path","type":"string"},{"internalType":"string","name":"name","type":"string"}],"internalType":"struct Store.pathStructure","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getExcelArrayLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"idx","type":"uint256"}],"name":"getExcelMapItem","outputs":[{"components":[{"internalType":"string","name":"cid","type":"string"},{"internalType":"uint256","name":"time","type":"uint256"},{"internalType":"uint256","name":"size","type":"uint256"}],"internalType":"struct Store.excelData","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"}],"name":"getexcelMapLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_addr","type":"address"}],"name":"isAdmin","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_addr","type":"address"},{"internalType":"bool","name":"_type","type":"bool"}],"name":"setAdmin","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"idx","type":"uint256"},{"internalType":"string","name":"path","type":"string"}],"name":"setPath","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},392:function(e,t,n){},409:function(e,t){},412:function(e,t){},415:function(e,t){},419:function(e,t){},420:function(e,t){},446:function(e,t){},448:function(e,t){},457:function(e,t){},459:function(e,t){},470:function(e,t){},472:function(e,t){},486:function(e,t){},514:function(e,t){},515:function(e,t){},589:function(e,t){},591:function(e,t){},598:function(e,t){},599:function(e,t){},745:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(293),s=n.n(a),r=(n(392),n(60)),o=n(129),c=n(12),u=n(10),l=n(294),p=n.n(l),d=n(297),h=n(298),f=n.n(h),m=function(){function e(){Object(c.a)(this,e),this.contractAddr="0x5308132eb6826ef1fcc8b1f1f31f0675bc8fc646",this.web3=void 0,this.contract=void 0,this.nameResult=[],this.nameLength=0,this.detail={},this.detailLength={},this.web3=new p.a("wss://eth-goerli.g.alchemy.com/v2/1EUEe6ifJGvzlvwhRRhla2d0nAg5ZIvu"),this.contract=new this.web3.eth.Contract(d,this.contractAddr)}return Object(u.a)(e,[{key:"listFolders",value:function(){var e=Object(o.a)(Object(r.a)().mark((function e(){var t,n,i,a,s,o,c,u;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.nameLength=0,e.next=3,this.contract.methods.getExcelArrayLength().call();case 3:for(t=e.sent,n=[],i=this.nameLength;i<=t-1;i++)n.push(this.contract.methods.getExcelArrayItem(i).call());return e.next=8,Promise.all(n);case 8:for(a=e.sent,n=[],s=this.nameLength;s<=t-1;s++)n.push(this.contract.methods.getExcelMapItem(a[s].name,0).call());return e.next=13,Promise.all(n);case 13:for(o=e.sent,c=this.nameLength;c<=t-1;c++)u={path:a[c-this.nameLength].path,name:a[c-this.nameLength].name,size:+o[c-this.nameLength].size,lastModified:new Date(1e3*+o[c-this.nameLength].time)},this.nameResult.push(u);return this.nameLength=t,e.abrupt("return",this.nameResult);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"listFiles",value:function(){var e=Object(o.a)(Object(r.a)().mark((function e(t){var n,i,a,s,o,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.detailLength[t]=0,e.next=3,this.contract.methods.getexcelMapLength(t).call();case 3:for(n=e.sent,i=[],a=this.detailLength[t];a<=n-1;a++)i.push(this.contract.methods.getExcelMapItem(t,a).call());return e.next=8,Promise.all(i);case 8:for(s=e.sent,o=this.detailLength[t];o<=n-1;o++)c={uuid:s[o-this.detailLength[t]].cid,name:t,size:+s[o-this.detailLength[t]].size,lastModified:new Date(1e3*+s[o-this.detailLength[t]].time)},0===this.detailLength[t]&&(this.detail[t]=[]),this.detail[t].push(c);return this.detailLength[t]=n,e.abrupt("return",this.detail[t]);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"downloadFile",value:function(){var e=Object(o.a)(Object(r.a)().mark((function e(t,n){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f()({url:"https://ipfs.io/ipfs/"+t,method:"GET",responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),i=document.createElement("a");i.href=t,i.setAttribute("download",n),document.body.appendChild(i),i.click(),document.body.removeChild(i)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),y=n(818),b=n(819),g=n(820),v=n(813),j=n(821),O=n(372),x=n.n(O),w=n(24),T=n(814),L=n(815),M=n(7),E=n(128),R=n(5);Object(M.h)({iconComponent:E.a});var A={"/":{id:"/",name:"Root",isDir:!0}},k=function(e){var t=Object(i.useState)(null),n=Object(w.a)(t,2),a=n[0],s=n[1],r=Object(i.useState)("/"),o=Object(w.a)(r,2),c=o[0],u=o[1],l=Object(i.useState)(null),p=Object(w.a)(l,2),d=p[0],h=p[1],f=Object(i.useState)(A),m=Object(w.a)(f,2),y=m[0],b=m[1];Object(i.useEffect)((function(){!function(e,t,n){e.listFolders().then((function(e){var n={"/":{id:"/",name:"Root",isDir:!0,children:[]}};e.forEach((function(e){var t;if("/"!==e.path)for(var i=0;i<=e.path.length;++i)if(i===e.path.length||"/"===e.path.charAt(i)){var a,s=e.path.slice(0,i),r=s.slice(s.lastIndexOf("/")+1),o=0===s.lastIndexOf("/")?"/":s.slice(0,s.lastIndexOf("/"));s.length>0&&void 0===n[s]&&(null===(a=n[o].children)||void 0===a||a.push(s),n[s]={id:s,name:r,children:[],isDir:!0})}var c=("/"===e.path?"":e.path)+"/"+e.name;null===(t=n[e.path].children)||void 0===t||t.push(c),n[c]={id:c,name:e.name,modDate:e.lastModified,size:e.size,isDir:!1}})),t(n)})).catch((function(e){n({message:e,severity:"error"})}))}(e.reefRepository,b,s)}),[e.reefRepository]);var g=function(e,t){return Object(i.useMemo)((function(){var n=t[e];return n.children?n.children.map((function(e){return t[e]})):"/"===e?[null]:[]}),[e,t])}(c,y),v=Object(i.useState)(null),j=Object(w.a)(v,2),O=j[0],x=j[1];Object(i.useEffect)((function(){!function(e,t,n,i){null==t?n(null):(n([null]),e.listFiles(t).then((function(e){var t=e.map((function(e){return{id:e.uuid,name:e.name,modDate:e.lastModified,size:e.size,isDir:!1}}));n(t)})).catch((function(e){i({message:e,severity:"error"})})))}(e.reefRepository,d,x,s)}),[d,e.reefRepository]);var E=function(e,t,n){return Object(i.useMemo)((function(){var i=["/"];if("/"!==e)for(var a=1;a<=e.length;++a)a!==e.length&&"/"!==e.charAt(a)||i.push(e.slice(0,a));var s=i.map((function(e){return n[e]}));return null!=t&&s.push({id:("/"===e?"":e)+"/"+t,name:t+" (Multiple Versions)"}),s}),[e,t,n])}(c,d,y),k=function(e,t,n,a,s){return Object(i.useCallback)((function(i){if(i.id===M.a.OpenFiles.id){var r=i.payload,o=r.targetFile,c=r.files,u=null!==o&&void 0!==o?o:c[0];u&&(u.isDir?(a(u.id),s(null)):t?(n({message:"The file is now downloading...",severity:"info"}),e.downloadFile(u.id,u.name)):s(u.name))}console.log(i)}),[a,s,t,e,n])}(e.reefRepository,null!=d,s,u,h);return Object(R.jsxs)("div",{style:{height:"80vh"},children:[Object(R.jsxs)(M.c,{instanceId:e.instanceId,files:null!==O&&void 0!==O?O:g,folderChain:E,onFileAction:k,defaultFileViewActionId:M.a.EnableListView.id,children:[Object(R.jsx)(M.f,{}),Object(R.jsx)(M.g,{}),Object(R.jsx)(M.e,{}),Object(R.jsx)(M.d,{})]}),Object(R.jsx)(T.a,{open:null!==a,autoHideDuration:3e3,onClose:function(){s(null)},ClickAwayListenerProps:{onClickAway:function(){}},children:Object(R.jsx)(L.a,{onClose:function(){s(null)},severity:null===a||void 0===a?void 0:a.severity,sx:{width:"100%"},children:null===a||void 0===a?void 0:a.message})})]})};var I=function(){var e=new m;return Object(R.jsxs)(y.a,{sx:{flexGrow:1},children:[Object(R.jsx)(b.a,{position:"static",children:Object(R.jsxs)(g.a,{children:[Object(R.jsx)(v.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(R.jsx)(x.a,{})}),Object(R.jsx)(j.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Reef Blockchain Explorer"})]})}),Object(R.jsx)("div",{style:{padding:32},children:Object(R.jsx)(k,{instanceId:"reef-browser",reefRepository:e})})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,824)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),s(e),r(e)}))};Object(M.h)({iconComponent:E.a}),s.a.createRoot(document.getElementById("root")).render(Object(R.jsx)(I,{})),C()}},[[745,1,2]]]);
//# sourceMappingURL=main.969033d1.chunk.js.map