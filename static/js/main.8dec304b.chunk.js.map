{"version":3,"sources":["data/ReefRepositoryV2Implement.ts","components/ReefBrowser.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["ReefRepositoryV2Implement","contractAddr","web3","contract","base","rpc","this","Web3","eth","Contract","contractABI","folderIdx","methods","getFolderListLength","call","arrayLength","promiseArray","i","push","getFolderList","Promise","all","IdxArray","length","getFolderName","NameArray","Result","tmp","name","getFolderExcelLength","getFolderExcel","excelArray","entry","console","log","getExcelLength","getExcel","uuid","size","lastModified","Date","fileUUID","fileName","axios","url","method","responseType","response","window","URL","createObjectURL","Blob","data","link","document","createElement","href","setAttribute","body","appendChild","click","removeChild","setChonkyDefaults","iconComponent","ChonkyIconFA","ReefBrowser","props","useState","snackbarInfo","setSnackbarInfo","hashDialogInfo","setHashDialogInfo","path","index","folder","setFolder","file","setFile","folderFiles","setFolderFiles","useEffect","reefRepository","subFolders","listFolders","subFiles","listFolderFiles","then","res","folders","map","subFolder","id","toString","isDir","files","subFile","concat","catch","err","message","severity","updateFolderFiles","versionFiles","setVersionFiles","listFiles","reefFiles","reefFile","modDate","updateVersionFiles","folderChain","useMemo","p","useFolderChain","handleFileAction","isInFile","useCallback","ChonkyActions","OpenFiles","payload","targetFile","fileToOpen","isParent","entries","slice","parseInt","downloaded","filename","hash","downloadFile","split","idx","useFileActionHandler","style","height","instanceId","onFileAction","defaultFileViewActionId","EnableListView","Snackbar","open","autoHideDuration","onClose","ClickAwayListenerProps","onClickAway","Alert","sx","width","Dialog","maxWidth","DialogTitle","DialogContent","DialogContentText","target","rel","DialogActions","Button","disabled","onClick","autoFocus","App","repository","Box","flexGrow","AppBar","position","Toolbar","IconButton","edge","color","mr","Typography","variant","component","padding","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","getElementById","render"],"mappings":"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","file":"static/js/main.8dec304b.chunk.js","sourcesContent":["import { ReefFile, ReefFolderV2, ReefRepositoryV2, ReefFileEntry } from \"./ReefRepository\";\nimport { AbiItem } from 'web3-utils'\nimport Web3 from 'web3';\nimport { Contract } from \"web3-eth-contract\"\nimport contractABI from './abiV2.json'\nimport axios from 'axios';\n\nexport class ReefRepositoryV2Implement implements ReefRepositoryV2 {\n\tcontractAddr = \"0x2620c8c46F1194e4Ce4A46B30051eAdd481c1371\"\n    web3: Web3;\n    contract: Contract;\n\n    base = \"https://quorum-blockchain.yikuo.dev/api/\";\n    rpc = \"https://rpc.quorum-blockchain.yikuo.dev/\"\n\n    constructor() {\n        this.web3 = new Web3(this.rpc);\n        this.contract = new this.web3.eth.Contract( contractABI as AbiItem[], this.contractAddr);\n    }\n\t\n\tasync listFolders(folderIdx: number): Promise<ReefFolderV2[]> {\n\t\tlet arrayLength = await this.contract.methods.getFolderListLength(folderIdx).call();\n\t\tlet promiseArray = [];\n        for (let i = 0; i < arrayLength ; i++) {\n            promiseArray.push(this.contract.methods.getFolderList(folderIdx, i).call());\n        }\n        let IdxArray = await Promise.all(promiseArray);\n\t\tpromiseArray = [];\n\t\tfor (let i = 0; i < IdxArray.length; i ++){\n\t\t\tpromiseArray.push(this.contract.methods.getFolderName(IdxArray[i]).call())\n\t\t}\n\t\tlet NameArray = await Promise.all(promiseArray);\n\t\tlet Result: ReefFolderV2[] = []\n\t\tfor (let i = 0; i < IdxArray.length; i++){\n\t\t\tlet tmp = {\n\t\t\t\tfolderIdx: IdxArray[i],\n\t\t\t\tname: NameArray[i],\n\t\t\t}\n\t\t\tResult.push(tmp);\n\t\t}\n\t\treturn Result;\n\t}\n\tasync listFolderFiles(folderIdx: number): Promise<ReefFileEntry[]>{\n\t\tlet arrayLength = await this.contract.methods.getFolderExcelLength(folderIdx).call();\n\t\tlet promiseArray = [];\n        for (let i = 0; i < arrayLength ; i++) {\n            promiseArray.push(this.contract.methods.getFolderExcel(folderIdx, i).call());\n        }\n        let excelArray = await Promise.all(promiseArray);\n\t\tlet Result: ReefFileEntry[] = []\n\t\tfor (let i = 0; i < excelArray.length; i++){\n\t\t\tlet tmp = {\n\t\t\t\tfolderIdx: folderIdx,\n\t\t\t\tname: excelArray[i],\n\t\t\t}\n\t\t\tResult.push(tmp);\n\t\t}\n\t\treturn Result;\n\t}\n\tasync listFiles(entry: ReefFileEntry): Promise<ReefFile[]>{\n        console.log(entry.folderIdx)\n        console.log(entry.name)\n        let arrayLength = await this.contract.methods.getExcelLength(entry.folderIdx, entry.name).call()\n        console.log(\"TEST:\", arrayLength)\n        let promiseArray = [];\n        for (let i = 0 ; i < arrayLength ; i++) {\n            promiseArray.push(this.contract.methods.getExcel(entry.folderIdx, entry.name, i).call());\n        }\n        let excelArray = await Promise.all(promiseArray);\n\t\tlet Result: ReefFile[] = [];\n        for (let i = 0 ; i < excelArray.length ; i++){\n            let tmp = {\n                uuid: excelArray[i][\"cid\"],\n                name: entry.name,\n                size: +excelArray[i][\"size\"],\n                lastModified: new Date(+excelArray[i][\"time\"])\n            }\n            Result.push(tmp);\n        }\n        return Result;\n\t}\n\tasync downloadFile(fileUUID: string, fileName: string): Promise<void>{\n        const response = await axios({\n            url: this.base + `data/${fileUUID}/download` ,\n            method: 'GET',\n            responseType: 'blob'\n        });\n\n        const url = window.URL.createObjectURL(new Blob([response.data]));\n        const link = document.createElement('a');\n        link.href = url;\n        link.setAttribute('download', fileName);\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\t}\n}\n"," import { Alert, AlertColor, Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Snackbar } from '@mui/material';\nimport {\n    ChonkyActions,\n    ChonkyFileActionData,\n    FileArray,\n    FileBrowser,\n    FileContextMenu,\n    FileList,\n    FileNavbar,\n    FileToolbar,\n    setChonkyDefaults,\n} from 'chonky';\nimport { ChonkyIconFA } from 'chonky-icon-fontawesome';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { ReefFile, ReefFileEntry, ReefFolderV2, ReefRepositoryV2 } from '../data/ReefRepository';\n\nsetChonkyDefaults({ iconComponent: ChonkyIconFA });\n\ninterface Path {\n    index: number,\n    name: string\n}\n\ninterface Folder {\n    path: Path[],\n    index: number\n}\n\ninterface SnackBarInfo {\n    message: string,\n    severity: AlertColor\n}\n\ninterface HashDialogInfo {\n    downloaded: boolean,\n    filename: string,\n    hash: string\n}\n\nexport const useFolderChain = (folder: Folder, file: ReefFileEntry | null): FileArray => {\n    return useMemo(() => {\n        const folderChain: FileArray = folder.path.map((p: Path) => {\n            return {\n                id: p.index.toString(),\n                name: p.name,\n                isDir: true\n            };\n        });\n\n        if (file != null) {\n            folderChain.push({\n                id: `${file.folderIdx}/${file.name}`,\n                name: file.name + \" (History)\",\n                isDir: false\n            })\n        }\n\n        console.log(folderChain);\n        return folderChain;\n    }, [folder, file]);\n};\n\nexport const useFileActionHandler = (\n    reefRepository: ReefRepositoryV2,\n    isInFile: boolean,\n    folder: Folder,\n    setSnackbarInfo: (snackbarInfo: SnackBarInfo) => void,\n    setFolder: (folder: Folder) => void,\n    setFile: (file: ReefFileEntry | null) => void,\n    setHashDialogInfo: (hashDialogInfo: HashDialogInfo | null) => void,\n) => {\n    return useCallback(\n        (data: ChonkyFileActionData) => {\n            if (data.id === ChonkyActions.OpenFiles.id) {\n                const { targetFile, files } = data.payload;\n                const fileToOpen = targetFile ?? files[0];\n                console.log(fileToOpen);\n\n                if (fileToOpen) {\n                    if (fileToOpen.isDir) {\n                        // Check if going back to parent\n                        let isParent = false;\n                        for (const [i, path] of folder.path.entries()) {\n                            if (path.index.toString() === fileToOpen.id) {\n                                isParent = true;\n\n                                setFolder({\n                                    path: folder.path.slice(0, i + 1),\n                                    index: parseInt(fileToOpen.id)\n                                });\n                                setFile(null);\n                                break;\n                            }\n                        }\n\n                        // Otherwise, advance in deeper folder\n                        if (!isParent) {\n                            setFolder({\n                                path: [...folder.path, {\n                                    index: parseInt(fileToOpen.id),\n                                    name: fileToOpen.name\n                                }],\n                                index: parseInt(fileToOpen.id)\n                            });\n                            setFile(null);\n                        }\n                    } else {\n                        if (isInFile) {\n                            setSnackbarInfo({\n                                message: \"The file is now downloading...\",\n                                severity: 'info'\n                            });\n                            \n                            setHashDialogInfo({\n                                downloaded: false,\n                                filename: fileToOpen.name,\n                                hash: fileToOpen.id\n                            });\n\n                            reefRepository.downloadFile(fileToOpen.id, fileToOpen.name)\n                                .then(() => {\n                                    setHashDialogInfo({\n                                        downloaded: true,\n                                        filename: fileToOpen.name,\n                                        hash: fileToOpen.id\n                                    });\n                                    setSnackbarInfo({\n                                        message: \"The file is downloaded.\",\n                                        severity: 'success'\n                                    });\n                                })\n                                .catch((err) => {\n                                    console.log(err);\n                                    setHashDialogInfo(null)\n                                    setSnackbarInfo({\n                                        message: `Download failed: ${err}`,\n                                        severity: 'error'\n                                    });\n                                })\n                        } else {\n                            const [idx] = fileToOpen.id.split(\"/\", 1);\n                            const name = fileToOpen.name;\n\n                            setFile({\n                                folderIdx: parseInt(idx),\n                                name: name\n                            });\n                        }\n                    }\n                }\n            }\n\n            console.log(data);\n        },\n        [folder.path, setFolder, setFile, isInFile, setSnackbarInfo, reefRepository, setHashDialogInfo]\n    );\n};\n\nexport const updateFolderFiles = (\n    reefRepository: ReefRepositoryV2,\n    folder: Folder,\n    setFolderFiles: (folderFiles: FileArray) => void,\n    setSnackbarInfo: (snackbarInfo: SnackBarInfo) => void,\n) => {\n    setFolderFiles([null]);\n\n    const subFolders = reefRepository.listFolders(folder.index);\n    const subFiles = reefRepository.listFolderFiles(folder.index);\n\n    Promise.all([subFolders, subFiles]).then((res) => {\n            const subFolders = res[0];\n            const subFiles= res[1];\n\n            const folders: FileArray = subFolders.map((subFolder: ReefFolderV2) => {\n                return {\n                    id: subFolder.folderIdx.toString(),\n                    name: subFolder.name,\n                    isDir: true\n                };\n            });\n\n            const files: FileArray = subFiles.map((subFile: ReefFileEntry) => {\n                return {\n                    id: `${subFile.folderIdx}/${subFile.name}`,\n                    name: subFile.name,\n                    isDir: false\n                };\n            });\n\n            console.log(folders.concat(files));\n            setFolderFiles(folders.concat(files));\n        })\n        .catch((err: any) => {\n            console.log(err);\n            setSnackbarInfo({\n                message: `${err}`,\n                severity: 'error'\n            });\n        });\n}\n\nexport const updateVersionFiles = (\n    reefRepository: ReefRepositoryV2,\n    file: ReefFileEntry | null,\n    setVersionFiles: (versionFiles: FileArray | null) => void,\n    setSnackbarInfo: (snackbarInfo: SnackBarInfo) => void,\n) => {\n    if (file == null) {\n        setVersionFiles(null);\n    } else {\n        setVersionFiles([null]);\n        reefRepository.listFiles(file)\n            .then((reefFiles: ReefFile[]) => {\n                const versionFiles: FileArray = reefFiles.map((reefFile: ReefFile) => {\n                    return {\n                        id: reefFile.uuid,\n                        name: reefFile.name,\n                        modDate: reefFile.lastModified,\n                        size: reefFile.size,\n                        isDir: false\n                    }\n                })\n\n                setVersionFiles(versionFiles);\n            })\n            .catch((err: any) => {\n                console.log(err);\n                setSnackbarInfo({\n                    message: `${err}`,\n                    severity: 'error'\n                });\n            });\n    }\n}\n\n\nexport const ReefBrowser: React.FC<{ instanceId: string, reefRepository: ReefRepositoryV2 }> = (props) => {\n    const [snackbarInfo, setSnackbarInfo] = useState(null as (SnackBarInfo | null));\n    const [hashDialogInfo, setHashDialogInfo] = useState(null as (HashDialogInfo | null));\n    \n    const [folder, setFolder] = useState({\n        path: [{\n            index: 0,\n            name: 'Root'\n        }],\n        index: 0\n    } as Folder);\n    const [file, setFile] = useState(null as (ReefFileEntry | null));\n\n    const [folderFiles, setFolderFiles] = useState([null] as FileArray);\n    useEffect(() => {\n        updateFolderFiles(props.reefRepository, folder, setFolderFiles, setSnackbarInfo);\n    }, [folder, props.reefRepository])\n\n    const [versionFiles, setVersionFiles] = useState(null as (FileArray | null));\n    useEffect(() => {\n        updateVersionFiles(props.reefRepository, file, setVersionFiles, setSnackbarInfo);\n    }, [file, props.reefRepository])\n\n    const folderChain = useFolderChain(folder, file);\n    const handleFileAction = useFileActionHandler(\n        props.reefRepository,\n        file != null,\n        folder,\n        setSnackbarInfo,\n        setFolder,\n        setFile,\n        setHashDialogInfo\n    );\n    return (\n        <div style={{ height: '80vh' }}>\n            <FileBrowser\n                instanceId={props.instanceId}\n                files={versionFiles ?? folderFiles}\n                folderChain={folderChain}\n                onFileAction={handleFileAction}\n                defaultFileViewActionId={ChonkyActions.EnableListView.id}\n            >\n                <FileNavbar />\n                <FileToolbar />\n                <FileList />\n                <FileContextMenu />\n            </FileBrowser>\n\n            <Snackbar\n                open={snackbarInfo !== null}\n                autoHideDuration={5000}\n                onClose={() => { setSnackbarInfo(null) }}\n                ClickAwayListenerProps={{onClickAway: () => {}}}\n            >\n                <Alert\n                    onClose={() => { setSnackbarInfo(null) }}\n                    severity={snackbarInfo?.severity}\n                    sx={{ width: '100%' }}\n                >\n                    {snackbarInfo?.message}\n                </Alert>\n            </Snackbar>\n\n            <Dialog\n                open={hashDialogInfo !== null}\n                maxWidth={false}\n                onClose={() => { setHashDialogInfo(null) }}\n                aria-labelledby=\"alert-dialog-title\"\n                aria-describedby=\"alert-dialog-description\"\n            >\n                <DialogTitle>\n                    Hash Digest\n                </DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        The file <b>{hashDialogInfo?.filename}</b> is {hashDialogInfo?.downloaded? \"downloaded\": \"now downloading...\"}.\n                    </DialogContentText>\n                    <DialogContentText>\n                        The integrity of the file could be checked by comparing the <code>sha256</code> digest.\n                    </DialogContentText>\n                    <br />\n                    <DialogContentText>\n                        <b><code>{hashDialogInfo?.hash}</code></b>\n                    </DialogContentText>\n                    <br />\n                    <DialogContentText>\n                        You can use <a href='https://emn178.github.io/online-tools/sha256_checksum.html' target=\"_blank\" rel=\"noreferrer\">this online tool</a> to compute the hash digest.\n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        disabled={!hashDialogInfo?.downloaded}\n                        onClick={() => { setHashDialogInfo(null) }}\n                        autoFocus\n                    >\n                        Close\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </div>\n    );\n};","import { ReefRepositoryV2Implement } from './data/ReefRepositoryV2Implement'\nimport { AppBar, Box, Toolbar, IconButton, Typography } from '@mui/material';\nimport GrassIcon from '@mui/icons-material/Grass';\nimport { ReefBrowser } from './components/ReefBrowser';\n\nfunction App() {\n  // let repository = new ReefRepositoryImplement()\n  let repository = new ReefRepositoryV2Implement()\n  return (\n    <Box sx={{ flexGrow: 1 }}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton\n            size=\"large\"\n            edge=\"start\"\n            color=\"inherit\"\n            aria-label=\"menu\"\n            sx={{ mr: 2 }}\n          >\n            <GrassIcon />\n          </IconButton>\n          <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\n            Reef Blockchain Explorer\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <div style={{ padding: 32 }}>\n        <ReefBrowser instanceId=\"reef-browser\" reefRepository={repository}  />\n      </div>\n    </Box>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport { setChonkyDefaults } from 'chonky';\nimport { ChonkyIconFA } from 'chonky-icon-fontawesome';\n\nsetChonkyDefaults({ iconComponent: ChonkyIconFA });\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\nroot.render(\n  <App />\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}